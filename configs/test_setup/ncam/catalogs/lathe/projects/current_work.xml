<lcnc-ncam>
  <feature src="lathe/material.cfg" after="" help="&lt;b&gt;Workpiece or raw material used&lt;/b&gt;" old-selected="False" before="" id="workpiece_001" expanded="False" name="Workpiece" init="" version="1.14" new-selected="False" path="0" call="&#10;(begin #sub_name)&#10;(author : Fernand Veilleux)&#10;&#10;G#param_wmode (Diameter = 7, Radius = 8)&#10;#&lt;_diameter_mode&gt; = [#&lt;_lathe_diameter_mode&gt; + 1] (value is 1 for radius and 2 for diameter)&#10;&#10;#&lt;_wp_dia_od&gt; = [#param_od / 2 * #&lt;_diameter_mode&gt;]&#10;#&lt;_wp_dia_id&gt; = [#param_id / 2 * #&lt;_diameter_mode&gt;]&#10;&#10;#&lt;_x_rapid&gt;  = [#param_x_rap * #&lt;_diameter_mode&gt;]&#10;#&lt;_z_rapid&gt;  = #param_z_rap&#10;&#10;/ o&lt;#self_id1&gt; if [#param_sh EQ 1]&#10;&#9;/ o&lt;show_stock&gt; CALL [#param_z] [#param_l]&#10;/ o&lt;#self_id1&gt; endif&#10;&#10;(end #sub_name)" definitions="" hidden_count="0" type="workpiece" order="['PARAM_SH', 'PARAM_H1', 'PARAM_OD', 'PARAM_ID', 'PARAM_L', 'PARAM_Z', 'PARAM_H2', 'PARAM_WMODE', 'PARAM_X_RAP', 'PARAM_Z_RAP']" validation="&#10;if self.check_hash('#param_od', 1) &lt;= self.check_hash('#param_id', 1) :&#10;&#9;VALIDATED = False&#10;&#9;self.msg_inv(_('External diameter must be greater than the internal'), 1)" icon="l-stock.png">
    <param old_type="bool" name="Show limits" value="0" call="#param_sh" path="0:0" type="bool"/>
    <param call="#param_h1" old_type="sub-header" type="sub-header" name="Size and coord" path="0:1"/>
    <param old_type="float" name="Ext. diameter" metric_value="50.0" value="1.9685039370" header="h1" call="#param_od" path="0:1:0" not_allowed="0" icon="e-diam.png" type="float" minimum_value="0.0"/>
    <param tool_tip="Only if hollow" old_type="float" name="Int. diameter" metric_value="0.0" value="0.5787401575" header="h1" call="#param_id" path="0:1:1" icon="i-diam.png" type="float" minimum_value="0.0"/>
    <param old_type="float" name="Length" metric_value="250.0" value="3.9370078740" header="h1" call="#param_l" path="0:1:2" not_allowed="0" icon="width.png" type="float" minimum_value="0.0"/>
    <param tool_tip="Z coord at tip" old_type="float" name="Begin position" metric_value="0.0" value="0.0" header="h1" call="#param_z" path="0:1:3" type="float" icon="z.png"/>
    <param call="#param_h2" old_type="sub-header" type="sub-header" name="Params" path="0:2"/>
    <param old_type="combo" name="Work mode" value="7" header="h2" call="#param_wmode" path="0:2:0" type="combo" options="Diameter=7:Radius=8" icon="circle-rad-dia.png"/>
    <param tool_tip="When job is done" old_type="float" name="Safe X rapid" metric_value="25.0" value="0.3937007874" header="h2" call="#param_x_rap" path="0:2:1" not_allowed="0" icon="lathe-rappid-x.png" type="float" minimum_value="0.0"/>
    <param tool_tip="When job is done" old_type="float" name="Safe Z rapid" metric_value="25.0" value="0.3937007874" header="h2" call="#param_z_rap" path="0:2:2" not_allowed="0" minimum_value="0.0" type="float" icon="lathe-rappid-z.png"/>
  </feature>
  <feature src="lathe/tool-change.cfg" expanded="False" help="&lt;b&gt;Change Tool and/or settings&lt;/b&gt;&amp;#10;Changes setting accordingly even if disabled" icon="lathe-tool-change.png" old-selected="True" name="Tool Change" after="" definitions="" order="['PARAM_ACT', 'PARAM_H1', 'PARAM_DNUM', 'PARAM_US', 'PARAM_TLC', 'PARAM_SPINDLE_DIR', 'PARAM_COOLING', 'PARAM_H2', 'PARAM_MODE', 'PARAM_SPEED', 'PARAM_SURF_SPEED', 'PARAM_H8', 'PARAM_R_FEED', 'PARAM_C_DPT', 'PARAM_H4', 'PARAM_F_FEED', 'PARAM_FC_DPT', 'PARAM_HC', 'PARAM_RX', 'PARAM_RIX', 'PARAM_RZ']" init="&#10;a = parent.get_param('param_mode').get_attr('value')&#10;parent.get_param('param_surf_speed').set_grayed(a == '1')&#10;if a == '1' :&#10;&#9;parent.get_param('param_speed').attr['name'] = 'Spindle speed'&#10;else :&#10;&#9;parent.get_param('param_speed').attr['name'] = 'Max spindle'" version="1.14" new-selected="False" path="1" call="&#10;(begin #sub_name)&#10;(author : Fernand Veilleux)&#10;&#10;o&lt;#self_id_tlc&gt; if [[#param_tlc EQ 3] AND [#param_dnum GT 0]]&#10;&#9;M61 Q#param_dnum&#10;o&lt;#self_id_tlc&gt; endif&#10;&#10;o&lt;#self_id_act&gt; if [#param_act AND [#param_dnum NE #5400]]&#10;&#9;M9  (coolant off)&#10;&#9;T#param_dnum M6&#10;&#9;o&lt;#self_id_lc&gt; if [#param_tlc GE 1]&#10;&#9;&#9;G43 H#param_dnum&#10;&#9;o&lt;#self_id_lc&gt; endif&#10;o&lt;#self_id_act&gt; endif&#10;&#10;#&lt;_tool_usage&gt;   =  #param_us&#10;#&lt;_spindle_dir&gt;  =  #param_spindle_dir&#10;#&lt;_cooling_mode&gt; =  #param_cooling&#10;&#10;#&lt;_rough_feed&gt;   =  #param_r_feed&#10;#&lt;_rough_cut&gt;    =  #param_c_dpt&#10;&#10;#&lt;_finish_feed&gt;  =  #param_f_feed&#10;#&lt;_finish_cut&gt;   =  #param_fc_dpt&#10;&#10;o&lt;#self_id1&gt; if [#param_mode EQ 0]&#10;&#9;G96 D#param_speed S#param_surf_speed&#10;o&lt;#self_id1&gt; else&#10;&#9;G97 S#param_speed&#10;o&lt;#self_id1&gt; endif&#10;&#10;o&lt;#self_id2&gt; if [#&lt;_spindle_dir&gt; GT 0]&#10;&#9;M#&lt;_spindle_dir&gt;&#10;&#9;G4 P#&lt;_spindle_speed_up_delay&gt;&#10;o&lt;#self_id2&gt; endif&#10;&#10;#&lt;_z_clear&gt;  = [#5410 + #param_rz]&#10;#&lt;_x_clear&gt;  = [[#5410 + #param_rx] * #&lt;_diameter_mode&gt;]&#10;#&lt;_ix_clear&gt; = [#param_rix * #&lt;_diameter_mode&gt;]&#10;&#10;F#&lt;_rough_feed&gt;&#10;&#10;(end #sub_name)" hidden_count="0" validation="&#10;TOOL_TABLE.save_tool_orient(#param_dnum)" type="tool_change" id="tool_change_001" before="">
    <param tool_tip="Params will be set even if disabled" old_type="bool" name="Active" value="1" call="#param_act" path="1:0" type="bool" icon="enable.png"/>
    <param type="sub-header" old_type="sub-header" call="#param_h1" name="Tool and usage" path="1:1"/>
    <param tool_tip="Select from tool table" old_type="tool" name="Tool number" value="1" header="h1" call="#param_dnum" path="1:1:0" type="tool" icon="lathe-tool.png"/>
    <param tool_tip="Select usage for this tool" old_type="combo" name="Usage" value="0" header="h1" call="#param_us" path="1:1:1" type="combo" options="Roughing and finishing=0:Roughing=1:Finishing=2" icon="tool-usage.png"/>
    <param tool_tip="Use G43 and probe if setup" old_type="combo" name="Use length comp" value="1" header="h1" call="#param_tlc" path="1:1:2" type="combo" options="No=0:Already mounted and touched=3:From tool table=1:Table and probe=2" icon="comp-l.png"/>
    <param tool_tip="Select spindle rotation" old_type="combo" name="Start spindle" value="4" header="h1" call="#param_spindle_dir" path="1:1:3" type="combo" options="No=5:Clockwise=3:Counter-clockwise=4" icon="lathe-dir.png"/>
    <param tool_tip="Use flood, mist or none" old_type="combo" name="Use cooling" value="9" header="h1" call="#param_cooling" path="1:1:4" type="combo" options="None=9:Flood=8:Mist=7" icon="snowflake.png"/>
    <param type="sub-header" old_type="sub-header" call="#param_h2" name="Spindle control" path="1:2"/>
    <param old_type="combo" name="Mode" value="1" header="h2" call="#param_mode" value_changed="&#10;parent.get_param('param_surf_speed').set_grayed(new_val == '1')&#10;if new_val == '1' :&#10;&#9;parent.get_param('param_speed').attr['name'] = 'Spindle speed'&#10;else :&#10;&#9;parent.get_param('param_speed').attr['name'] = 'Max spindle'" path="1:2:0" type="combo" options="Constant surface speed=0:RPM=1" icon="lathe-chuck.png"/>
    <param tool_tip="RPM spindle speed" old_type="int" name="Spindle speed" value="800" header="h2" call="#param_speed" path="1:2:1" icon="tool-spindle.png" type="int" minimum_value="10"/>
    <param tool_tip="Constant spindle speed" old_type="int" name="Surface speed" type="int" value="250" header="h2" call="#param_surf_speed" path="1:2:2" icon="tool-spindle.png" grayed="1" minimum_value="100"/>
    <param tool_tip="Set these when usage is roughing" old_type="sub-header" name="Roughing" call="#param_h8" path="1:3" type="sub-header"/>
    <param tool_tip="Feed at 100% engagement" old_type="float" name="Feed" metric_value="75.0" value="0.00393700787402" header="h8" call="#param_r_feed" path="1:3:0" not_allowed="0" minimum_value="0.0" type="float" icon="lathe-feed.png"/>
    <param tool_tip="Depth of cutter engagment in machine units per pass" old_type="float" name="Cut depth" metric_value="0.5" value="0.02" header="h8" call="#param_c_dpt" path="1:3:1" not_allowed="0" minimum_value="0.0" type="float" icon="lathe-depth-step.png"/>
    <param tool_tip="Set these when usage include finishing" old_type="sub-header" name="Finishing" call="#param_h4" path="1:4" type="sub-header"/>
    <param tool_tip="Feed at 100% engagement" old_type="float" name="Feed" metric_value="50.0" value="0.0019685039" header="h4" call="#param_f_feed" path="1:4:0" not_allowed="0" minimum_value="0.0" type="float" icon="lathe-feed.png"/>
    <param tool_tip="Depth of cutter engagment in machine units per pass" old_type="float" name="Cut depth" metric_value="0.25" value="0.01" header="h4" call="#param_fc_dpt" path="1:4:1" not_allowed="0" minimum_value="0.0" type="float" icon="lathe-depth-step.png"/>
    <param type="sub-header" old_type="sub-header" call="#param_hc" name="Clearances" path="1:5"/>
    <param tool_tip="Retract distance on multiple passes" old_type="float" name="Retract X" metric_value="1.0" value="0.0393700787402" header="hc" call="#param_rx" path="1:5:0" not_allowed="0" minimum_value="0.0" type="float" icon="lx-clear.png"/>
    <param tool_tip="Retract distance" old_type="float" name="Int. retract X" metric_value="1.0" value="0.0393700787402" header="hc" call="#param_rix" path="1:5:1" not_allowed="0" minimum_value="0.0" type="float" icon="ix-clear.png"/>
    <param tool_tip="Retract distance on multiple passes" old_type="float" name="Retract Z" metric_value="1.0" value="0.0393700787402" header="hc" call="#param_rz" path="1:5:2" not_allowed="0" minimum_value="0.0" type="float" icon="lz-clear.png"/>
  </feature>
  <feature src="lathe/turning.cfg" expanded="False" help="&lt;b&gt;External straight turning with optional radiuses&lt;/b&gt;&amp;#10;Uses compensation with a radius&amp;#10;Cutter orientation should be 1, 2, 9 or None" icon="lathe-surface.png" old-selected="False" name="Turning" after="" order="['PARAM_ACT', 'PARAM_HX', 'PARAM_B_X', 'PARAM_E_X', 'PARAM_HZ', 'PARAM_B_Z', 'PARAM_E_Z', 'PARAM_H2', 'PARAM_ROPT', 'PARAM_R', 'PARAM_HF', 'PARAM_FIN']" new-selected="False" init="&#10;a = parent.get_param('param_ropt').get_attr('value')&#10;parent.get_param('param_r').set_grayed(a &lt; '2')" version="1.14" call="&#10;(begin #sub_name)&#10;(author : Fernand Veilleux)&#10;&#10;o&lt;#self_id_act&gt; if [#param_act]&#10;&#9;o&lt;turning&gt; CALL [#param_b_x] [#param_e_x] [#param_b_z] [#param_e_z] [#param_fin] [#param_r] [#param_ropt]&#10;o&lt;#self_id_act&gt; endif&#10;&#10;(end #sub_name)" definitions="" hidden_count="0" path="2" validation="&#10;if #param_act == 1 :&#10;&#9;if self.check_hash('#param_b_x', 0.6) &lt; self.check_hash('#param_e_x', 0.5) :&#10;&#9;&#9;self.msg_inv(_('Begin diameter must be greater than End diameter'), 1)&#10;&#9;&#9;VALIDATED = False&#10;&#10;&#9;bz = self.check_hash('#param_b_z', 0.0)&#10;&#9;ez = self.check_hash('#param_e_z', 0.0)&#10;&#9;if (bz &gt; ez) and TOOL_TABLE.get_tool_orient() not in [0, 2, 9] :&#10;&#9;&#9;self.msg_inv(_('Cutter orientation should be 2, 9 or 0'), 3)&#10;&#9;elif (bz &lt; ez) and TOOL_TABLE.get_tool_orient() not in [0, 1, 9] :&#10;&#9;&#9;self.msg_inv(_('Cutter orientation should be 1, 9 or 0'), 3)" type="turning" id="turning_001" before="">
    <param old_type="bool" name="Active" value="1" call="#param_act" path="2:0" type="bool" icon="enable.png"/>
    <param type="sub-header" old_type="sub-header" call="#param_hx" name="X axis" path="2:1"/>
    <param old_type="float" name="Begin diameter" metric_value="25.0" value="0.4330708661" header="hx" call="#param_b_x" path="2:1:0" not_allowed="0" minimum_value="0.0" type="float" icon="x.png"/>
    <param old_type="float" name="End diameter" metric_value="20.0" value="0.3149606299" header="hx" call="#param_e_x" path="2:1:1" minimum_value="0.0" type="float" icon="x-end.png"/>
    <param type="sub-header" old_type="sub-header" call="#param_hz" name="Z axis" path="2:2"/>
    <param old_type="float" name="Begin" metric_value="0.0" value="0.0787401574803" header="hz" call="#param_b_z" path="2:2:0" type="float" icon="z.png"/>
    <param old_type="float" name="End" metric_value="-25.0" value="-0.3937007874" header="hz" call="#param_e_z" path="2:2:1" type="float" icon="z-end.png"/>
    <param type="sub-header" old_type="sub-header" call="#param_h2" name="Options" path="2:3"/>
    <param name="End radius" value="1" header="h2" call="#param_ropt" value_changed="&#10;parent.get_param('param_r').set_grayed(new_val &lt; '2')" path="2:3:0" type="combo" options="None w/ compensation=0:None w/o compensation=1:Full radius=2:Stop at Begin diameter=3"/>
    <param tool_tip="Less than cutter radius means no radius at end" old_type="float" name="Radius" metric_value="0.0" type="float" value="0.0" header="h2" call="#param_r" path="2:3:1" minimum_value="0.0" grayed="1" icon="inner-radius.png"/>
    <param type="sub-header" old_type="sub-header" call="#param_hf" name="Finishing" path="2:4"/>
    <param tool_tip="Or spring passes" old_type="int" name="Number of passes" value="1" header="hf" call="#param_fin" path="2:4:0" minimum_value="0" type="int" icon="finish.png"/>
  </feature>
</lcnc-ncam>
